# Docker Compose automatically reads .env file from same directory
# Copy .env.example to .env and add your API keys

services:
  specbuilder:
    build: .
    ports:
      - "3080:3080"
    volumes:
      - specbuilder-data:/app/data
    env_file:
      - path: .env
        required: false
    environment:
      # These pass through from .env or host environment
      - GEMINI_API_KEY
      - OPENAI_API_KEY
      - ANTHROPIC_API_KEY
      # Ollama running on host machine (requires Ollama to listen on 0.0.0.0)
      # Set OLLAMA_HOST=0.0.0.0:11434 when starting Ollama on your host
      - OLLAMA_HOST=http://host.docker.internal:11434
    # Ensures host.docker.internal works on Linux (built-in on macOS/Windows)
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

volumes:
  specbuilder-data:
